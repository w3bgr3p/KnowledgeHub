# Time - Утилиты работы со временем

Статический класс для работы со временем в проектах ZennoPoster. Предоставляет методы для получения текущего времени, расчета времени выполнения, установки таймаутов и задержек.

## Статические методы

### Now
**Возвращает:** `string`

Получает текущее время в указанном формате.

**Параметры:**
- `format` (string, по умолчанию "unix") - формат времени: "unix", "iso", "short", "utcToId"

**Пример:**
```csharp
//получить время в unix формате
string unixTime = Time.Now();
project.SendInfoToLog($"Unix время: {unixTime}");

//получить время в ISO формате
string isoTime = Time.Now("iso");
project.SendInfoToLog($"ISO время: {isoTime}");
```

### Cd
**Возвращает:** `string`

Рассчитывает время до конца дня или добавляет указанное время к текущему моменту.

**Параметры:**
- `input` (object, по умолчанию null) - количество минут для добавления или строка времени, null для конца дня
- `o` (string, по умолчанию "iso") - формат вывода: "unix" или "iso"

**Пример:**
```csharp
//время до конца дня
string endOfDay = Time.Cd();
project.SendInfoToLog($"До конца дня: {endOfDay}");

//добавить 30 минут к текущему времени
string futureTime = Time.Cd(30, "unix");
project.SendInfoToLog($"Через 30 минут: {futureTime}");
```

## Методы-расширения для IZennoPosterProjectModel

### TimeElapsed
**Возвращает:** `int`

Вычисляет количество секунд, прошедших с момента начала сессии.

**Параметры:**
- `varName` (string, по умолчанию "varSessionId") - имя переменной с временем начала сессии

**Пример:**
```csharp
//узнать сколько секунд прошло с начала сессии
int elapsed = project.TimeElapsed();
project.SendInfoToLog($"Прошло секунд: {elapsed}");
```

### Age<T>
**Возвращает:** `T`

Получает возраст сессии в указанном типе данных.

**Пример:**
```csharp
//получить возраст сессии как строку
string ageString = project.Age<string>();
project.SendInfoToLog($"Возраст сессии: {ageString}");

//получить возраст как TimeSpan
TimeSpan ageTimeSpan = project.Age<TimeSpan>();
project.SendInfoToLog($"Часов работы: {ageTimeSpan.Hours}");
```

### TimeOut
Проверяет, не превышен ли глобальный таймаут выполнения. Выбрасывает исключение при превышении.

**Параметры:**
- `min` (int, по умолчанию 0) - лимит времени в минутах, если 0 - берется из переменной "timeOut"

**Пример:**
```csharp
//проверить таймаут в 60 минут
project.TimeOut(60);

//проверить таймаут из переменной timeOut
project.TimeOut();
```

### Deadline
Устанавливает дедлайн или проверяет его превышение.

**Параметры:**
- `sec` (int, по умолчанию 0) - лимит времени в секундах, если 0 - устанавливает начальное время

**Пример:**
```csharp
//установить начальное время для дедлайна
project.Deadline();

//проверить дедлайн в 300 секунд
project.Deadline(300);
```

### Sleep
Приостанавливает выполнение на указанное время.

**Параметры:**
- `min` (int, по умолчанию 0) - минимальное время задержки в секундах
- `max` (int, по умолчанию 0) - максимальное время задержки в секундах, если 0 - используется значение из "cfgDelay"

**Пример:**
```csharp
//задержка из настройки cfgDelay
project.Sleep();

//случайная задержка от 5 до 10 секунд
project.Sleep(5, 10);
```

### StartSession
Инициализирует новую сессию, устанавливая текущее время в переменную "varSessionId".

**Пример:**
```csharp
//начать новую сессию
project.StartSession();
project.SendInfoToLog("Сессия запущена");
```