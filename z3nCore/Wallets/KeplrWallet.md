# KeplrWallet

Класс **KeplrWallet** предоставляет инструменты для автоматизации работы с криптокошельком Keplr через браузерное расширение. Позволяет устанавливать расширение, импортировать кошельки, управлять ими и подписывать транзакции.

## Конструкторы

### KeplrWallet(IZennoPosterProjectModel, Instance, bool, string, string)
Инициализирует новый экземпляр класса KeplrWallet для работы с кошельком Keplr.

**Параметры:**
- **project** (IZennoPosterProjectModel) - проект ZennoPoster
- **instance** (Instance) - экземпляр браузера  
- **log** (bool) - включить логирование (по умолчанию false)
- **key** (string) - приватный ключ (опционально)
- **seed** (string) - мнемоническая фраза (опционально)

**Пример:**
```csharp
// инициализация KeplrWallet с логированием
var keplrWallet = new KeplrWallet(project, instance, log: true);

//отправить информацию в лог
project.SendInfoToLog("KeplrWallet создан успешно");
```

## Публичные методы

### Launch(string, string, bool)
**Возвращаемое значение:** void

Запускает расширение Keplr, устанавливает его при необходимости и импортирует кошелек из указанного источника.

**Параметры:**
- **source** (string) - источник для импорта ("seed" или "keyEvm", по умолчанию "seed")
- **fileName** (string) - имя файла расширения (опционально, по умолчанию используется встроенное значение)
- **log** (bool) - включить логирование (по умолчанию false)

**Пример:**
```csharp
// запуск Keplr с импортом из seed-фразы
keplrWallet.Launch("seed", log: true);

//отправить информацию в лог
project.SendInfoToLog("Keplr запущен и готов к работе");
```

### SetSource(string, bool)
**Возвращаемое значение:** void

Устанавливает активный источник кошелька в Keplr. Автоматически управляет импортированными кошельками и переключается на нужный.

**Параметры:**
- **source** (string) - источник кошелька ("seed" или "keyEvm")
- **log** (bool) - включить логирование (по умолчанию false)

**Пример:**
```csharp
// переключение на кошелек из приватного ключа
keplrWallet.SetSource("keyEvm", log: true);

//отправить информацию в лог
project.SendInfoToLog("Источник кошелька установлен на keyEvm");
```

### Unlock(bool)
**Возвращаемое значение:** void

Разблокирует кошелек Keplr, вводя пароль. Автоматически определяет, нужна ли разблокировка.

**Параметры:**
- **log** (bool) - включить логирование (по умолчанию false)

**Пример:**
```csharp
// разблокировка кошелька
keplrWallet.Unlock(log: true);

//отправить информацию в лог
project.SendInfoToLog("Кошелек Keplr разблокирован");
```

### Sign(bool)
**Возвращаемое значение:** void

Подписывает транзакцию в Keplr, ожидая появления окна подтверждения и автоматически нажимая кнопку "Approve".

**Параметры:**
- **log** (bool) - включить логирование (по умолчанию false)

**Пример:**
```csharp
// подписание транзакции
keplrWallet.Sign(log: true);

//отправить информацию в лог
project.SendInfoToLog("Транзакция подписана успешно");
```

### KeplrApprove(bool)
**Возвращаемое значение:** string

Устаревший метод для подписания транзакций. Рекомендуется использовать метод Sign().

**Параметры:**
- **log** (bool) - включить логирование (по умолчанию false)

**Пример:**
```csharp
// использование устаревшего метода (не рекомендуется)
string result = keplrWallet.KeplrApprove(log: true);

//отправить предупреждение в лог
project.SendWarningToLog("Используется устаревший метод KeplrApprove");
```